<!-- Backdrop: clic afuera para cerrar -->
<div class="backdrop" (click)="close()"></div>

<!-- Ventana modal -->
<section class="modal" role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
  <header class="modal__header">
    <h3>Iniciar sesión</h3>
    <button class="modal__close" (click)="close()" aria-label="Cerrar">✕</button>
  </header>

  <form (ngSubmit)="doLogin()" #f="ngForm" class="modal__body">
    <label class="field">
      <span>Usuario</span>
      <input
        name="username"
        [(ngModel)]="username"
        required
        autocomplete="username"
      />
    </label>

    <label class="field">
      <span>Contraseña</span>
      <input
        name="password"
        [(ngModel)]="password"
        type="password"
        required
        autocomplete="current-password"
      />
    </label>

    <button class="btn btn--primary" type="submit" [disabled]="loading || !f.valid">
      {{ loading ? 'Entrando…' : 'Entrar' }}
    </button>
  </form>

  <div class="modal__footer">
    <button class="btn btn--ghost" (click)="doRegister()" [disabled]="loading || !username || !password">
      Crear cuenta
    </button>
  </div>

  <p *ngIf="error" class="msg msg--error">{{ error }}</p>
  <p *ngIf="success" class="msg msg--ok">{{ success }}</p>
</section>

